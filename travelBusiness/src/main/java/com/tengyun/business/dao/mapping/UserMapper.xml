<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tengyun.business.dao.UserMapper">
    <select id="getDetailByOpenId" resultType="com.tengyun.business.entity.User">
        select u.id,
               u.open_id,
               u.phone,
               u.name,
               u.password,
               u.companyAccount,
               u.state,
               u.type,
               u.parid,
               u.account,
               c.id           AS 'company.id',
               c.name         AS 'company.name',
               c.account      AS 'company.account',
               c.app_security AS 'company.app_security',
               c.app_key      AS 'company.app_key'
        from travel_business.user u
                 left join company c
                           on u.companyAccount = c.account
        where u.open_id = #{openId};
    </select>
</mapper>